; PlatformIO Project Configuration File
; Acyd-Gotchi Firmware (ESP32-CYD)
; Configuration basée sur "Random Nerd Tutorials" pour ESP32-2432S028R

[env:esp32-cyd]
platform = espressif32
board = esp32dev
framework = arduino

monitor_speed = 115200
upload_speed = 921600

; Partitionnement optimisé pour laisser de la place au code (LVGL/WiFi)
board_build.partitions = min_spiffs.csv

; --- Build flags (Remplace User_Setup.h) ---
build_flags =
  -std=c++17
  
  ; Indique à la librairie d'utiliser nos définitions ci-dessous
  -D USER_SETUP_LOADED=1
  
  ; --- 1. DRIVER & COULEURS ---
  -D ILI9341_2_DRIVER=1     ; Driver optimisé recommandé par RNT
  
  ; ##################################################################
  ; ATTENTION : INVERSION DES COULEURS
  ; Si vos couleurs sont inversées (Bleu à la place du Rouge),
  ; commentez ou décommentez la ligne ci-dessous.
  ; Standard CYD = TFT_BGR. Si c'est bizarre, tentez TFT_RGB.
  -D TFT_RGB_ORDER=TFT_BGR
  ; -D TFT_RGB_ORDER=TFT_RGB
  ; ##################################################################

  -D TFT_WIDTH=240
  -D TFT_HEIGHT=320
  
  ; --- 2. PINS (Correspondance RNT) ---
  -D TFT_MISO=12
  -D TFT_MOSI=13
  -D TFT_SCLK=14
  -D TFT_CS=15
  -D TFT_DC=2
  -D TFT_RST=-1             ; Relié au reset de l'ESP32
  
  ; Rétroéclairage (Standard RNT = 21. Si écran noir, testez 27)
  -D TFT_BL=21
  -D TFT_BACKLIGHT_ON=HIGH

  ; Tactile
  -D TOUCH_CS=33

  ; --- 3. CONFIGURATION SYSTÈME & FONTS ---
  -D USE_HSPI_PORT=1        ; Important selon le fichier RNT
  
  -D SPI_FREQUENCY=55000000
  -D SPI_READ_FREQUENCY=20000000
  -D SPI_TOUCH_FREQUENCY=2500000
  
  ; Chargement des polices (Gourmand en mémoire flash mais utile)
  -D LOAD_GLCD=1
  -D LOAD_FONT2=1
  -D LOAD_FONT4=1
  -D LOAD_FONT6=1
  -D LOAD_FONT7=1
  -D LOAD_FONT8=1
  -D LOAD_GFXFF=1
  -D SMOOTH_FONT=1

  ; --- 4. Configuration LVGL (Optionnel si utilisé) ---
  -D LV_CONF_INCLUDE_SIMPLE
  -I ${PROJECT_DIR}

; --- Libraries ---
lib_deps =
  bodmer/TFT_eSPI @ ^2.5.43
  https://github.com/PaulStoffregen/XPT2046_Touchscreen.git
  lvgl/lvgl @ ^8.3.9      ; Gardé car présent dans votre demande précédente

lib_extra_dirs = 
  include